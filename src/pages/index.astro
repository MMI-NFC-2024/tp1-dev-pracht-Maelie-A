---
import Layout from "../layouts/Layout.astro";
import PlotFigure from "../components/PlotFigure.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/untitled.json";

const data = penguins.filter(
  (d) => d.species && d.culmen_length_mm != null && d.culmen_depth_mm != null
);

const scatterOptions = {
  width: 860,
  height: 480,
  marks: [
    Plot.dot(data, {
      x: "culmen_length_mm",
      y: "culmen_depth_mm",
      stroke: "species",
      fill: "species",
      r: 3.5,
      opacity: 0.85,
      tip: true
    })
  ],
  x: { label: "Longueur du bec (mm)", grid: true },
  y: { label: "Profondeur du bec (mm)", grid: true },
  color: { legend: true }
};
---

<Layout>
  <h1 class="text-4xl font-bold">
    Scatterplot <span class="text-gray-500">(couleur = espèce)</span>
  </h1>
  <p class="text-gray-500 mb-4">
    Données chargées : {data.length} lignes
  </p>
  <PlotFigure options={scatterOptions} />
</Layout>



